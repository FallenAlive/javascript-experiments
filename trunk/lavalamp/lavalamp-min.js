for(var h=0,j,k,l,m=32,n=64,o=new Array(m*n),p=20,q=new Array(p),r=Math.random,s=Math.sin,t=Math.abs,u=0;u<p;u++)q[u]={x:r()*m,y:n,a:r()*0.2-0.1,b:-r()*0.2,d:r()+0.8,c:r()+0.8};
function v(){var b,a;for(b=0;b<p;b++){a=q[b];a.x+=a.a;a.y+=a.b;if(a.x>m&&a.a>0||a.x<0&&a.a<0)a.a=-a.a;if(a.y>n&&a.b>0||a.y<0&&a.b<0)a.b=-a.b}var e=b=0,g=0,f,c;a=t(s(h/313));var d=t(Math.cos(h/213)),i=s(h/87+a*d*10);e=s(h/100);a=(i*a+e*d+1)*200;for(d=0;d<n;d++)for(i=0;i<m;i++){for(e=g=0;e<p;e++){c=q[e];f=(c.x-i)/c.d;c=(c.y-d)/c.c;g+=0.01/(f*f+c*c)}g=1/g;e=g<1E3?g<a?1:1-(g-a)/(1E3-a):0;o[b++]=e*255}b=m*4+4;a=m+1;i=m-1;for(e=1;e<n;e++){for(g=1;g<i;g++){d=o[a];f=d-o[a-1];c=d-o[a-m];f+=128;c+=128;f=d*
(f*f+c*c)/5E4;f=d>255?255:f;l[b]=f;b+=2;l[b]=d;b++;l[b++]=255;a++}b+=8;a+=2}h++;j.putImageData(k,0,0);setTimeout(v,20)}window.onload=function(){j=document.getElementById("canvas").getContext("2d");k=j.getImageData(0,0,m,n);l=k.data;v()};
